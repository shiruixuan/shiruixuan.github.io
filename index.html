<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shiruixuan.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="shiruixuan">
<meta property="og:url" content="https://shiruixuan.github.io/index.html">
<meta property="og:site_name" content="shiruixuan">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="shiruixuan">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://shiruixuan.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>shiruixuan</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">shiruixuan</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">shiruixuan</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">1</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shiruixuan.github.io/2022/09/16/docker-zerotier-planet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shiruixuan">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shiruixuan">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | shiruixuan">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/16/docker-zerotier-planet/" class="post-title-link" itemprop="url">æ­å»ºç§æœ‰ ZeroTier Planet æ ¹æœåŠ¡å™¨ï¼ˆDocker ç‰ˆï¼‰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-09-16 15:46:00" itemprop="dateCreated datePublished" datetime="2022-09-16T15:46:00+08:00">2022-09-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-05-30 10:01:44" itemprop="dateModified" datetime="2025-05-30T10:01:44+08:00">2025-05-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="åŠŸèƒ½ç‰¹æ€§"><a href="#åŠŸèƒ½ç‰¹æ€§" class="headerlink" title="åŠŸèƒ½ç‰¹æ€§"></a>åŠŸèƒ½ç‰¹æ€§</h1><ul>
<li>âœ… æ”¯æŒ Linux&#x2F;AMD64ã€Linux&#x2F;ARM64 æ¶æ„</li>
<li>ğŸ³ Docker å®¹å™¨åŒ–éƒ¨ç½²</li>
<li>ğŸ“¥ æ”¯æŒ URL ä¸‹è½½ planetã€moon é…ç½®</li>
<li>ğŸŒ å¯ä½œä¸º Moon æˆ– Planet æœåŠ¡å™¨æ­å»º</li>
</ul>
<h1 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h1><ul>
<li><a href="#1zerotier-%E4%BB%8B%E7%BB%8D">1ï¼šZeroTier ä»‹ç»</a></li>
<li><a href="#2%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%87%AA%E5%BB%BAplanet-%E6%9C%8D%E5%8A%A1%E5%99%A8">2ï¼šä¸ºä»€ä¹ˆè¦è‡ªå»ºPLANET æœåŠ¡å™¨</a></li>
<li><a href="#3%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85">3ï¼šå¼€å§‹å®‰è£…</a><ul>
<li><a href="#31%E5%87%86%E5%A4%87%E6%9D%A1%E4%BB%B6">3.1ï¼šå‡†å¤‡æ¡ä»¶</a><ul>
<li><a href="#311-%E5%AE%89%E8%A3%85git">3.1.1 å®‰è£…git</a></li>
<li><a href="#312-%E5%AE%89%E8%A3%85docker">3.1.2 å®‰è£…docker</a></li>
<li><a href="#313-%E5%90%AF%E5%8A%A8docker">3.1.3 å¯åŠ¨docker</a></li>
<li><a href="#314-%E9%85%8D%E7%BD%AEdocker%E5%8A%A0%E9%80%9F%E9%95%9C%E5%83%8F%E5%8F%AF%E9%80%89%E4%B8%8D%E9%85%8D%E4%B9%9F%E5%8F%AF%E4%BB%A5">3.1.4 é…ç½®dockeråŠ é€Ÿé•œåƒï¼ˆå¯é€‰ï¼Œä¸é…ä¹Ÿå¯ä»¥ï¼‰</a></li>
</ul>
</li>
<li><a href="#32%E4%B8%8B%E8%BD%BD%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81">3.2ï¼šä¸‹è½½é¡¹ç›®æºç </a></li>
<li><a href="#33%E6%89%A7%E8%A1%8C%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC">3.3ï¼šæ‰§è¡Œå®‰è£…è„šæœ¬</a></li>
<li><a href="#34-%E4%B8%8B%E8%BD%BD-planet-%E6%96%87%E4%BB%B6">3.4 ä¸‹è½½ <code>planet</code> æ–‡ä»¶</a></li>
<li><a href="#35-%E6%96%B0%E5%BB%BA%E7%BD%91%E7%BB%9C">3.5 æ–°å»ºç½‘ç»œ</a><ul>
<li><a href="#351-%E5%88%9B%E5%BB%BA%E7%BD%91%E7%BB%9C">3.5.1 åˆ›å»ºç½‘ç»œ</a></li>
<li><a href="#352-%E5%88%86%E9%85%8D%E7%BD%91%E7%BB%9Cip">3.5.2 åˆ†é…ç½‘ç»œIP:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE">4.å®¢æˆ·ç«¯é…ç½®</a><ul>
<li><a href="#41-windows-%E9%85%8D%E7%BD%AE">4.1 Windows é…ç½®</a><ul>
<li><a href="#42-%E5%8A%A0%E5%85%A5%E7%BD%91%E7%BB%9C">4.2 åŠ å…¥ç½‘ç»œ</a></li>
</ul>
</li>
<li><a href="#42-linux-%E5%AE%A2%E6%88%B7%E7%AB%AF">4.2 Linux å®¢æˆ·ç«¯</a></li>
<li><a href="#43-%E5%AE%89%E5%8D%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE">4.3 å®‰å“å®¢æˆ·ç«¯é…ç½®</a></li>
<li><a href="#44-macos-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE">4.4 MacOS å®¢æˆ·ç«¯é…ç½®</a></li>
<li><a href="#45-openwrt-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE">4.5 OpenWRT å®¢æˆ·ç«¯é…ç½®</a></li>
</ul>
</li>
<li><a href="#5-%E7%AE%A1%E7%90%86%E9%9D%A2%E6%9D%BFssl%E9%85%8D%E7%BD%AE">5. ç®¡ç†é¢æ¿SSLé…ç½®</a></li>
<li><a href="#6-%E5%8D%B8%E8%BD%BD">6. å¸è½½</a></li>
<li><a href="#7-qa">7: Q&amp;Aï¼š</a><ul>
<li><a href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91ping%E4%B8%8D%E9%80%9A%E7%9B%AE%E6%A0%87%E6%9C%BA%E5%99%A8">1. ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ</a></li>
<li><a href="#2-ios%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%80%8E%E4%B9%88%E7%94%A8">2. IOSå®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ</a></li>
<li><a href="#3-%E4%B8%BA%E4%BB%80%E4%B9%88%E7%9C%8B%E4%B8%8D%E5%88%B0%E5%AE%98%E6%96%B9%E7%9A%84planet">3. ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„Planet</a></li>
<li><a href="#4-%E6%88%91%E6%9B%B4%E6%8D%A2%E4%BA%86ip%E9%9C%80%E8%A6%81%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86">4. æˆ‘æ›´æ¢äº†IPéœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ</a></li>
<li><a href="#5-pve-lxc-%E5%AE%B9%E5%99%A8%E6%B2%A1%E6%9C%89%E5%88%9B%E5%BB%BA%E7%BD%91%E5%8D%A1">5. PVE lxc å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡</a></li>
<li><a href="#6-%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E6%80%8E%E4%B9%88%E5%8A%9E">6. ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼š</a></li>
<li><a href="#7-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%9E%E4%B8%8D%E4%B8%8Aplanet">7. ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet</a></li>
<li><a href="#8-%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%98%AF%E7%9B%B4%E8%BF%9E%E8%BF%98%E6%98%AF%E4%B8%AD%E8%BD%AC">8. å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬</a></li>
<li><a href="#9-%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E7%9A%84zerotier%E4%BC%A0%E8%BE%93%E4%B8%8D%E7%A8%B3%E5%AE%9A">9. ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š</a></li>
<li><a href="#10%E6%94%AF%E6%8C%81%E5%9F%9F%E5%90%8D%E5%90%97">10.æ”¯æŒåŸŸåå—ï¼Ÿ</a></li>
<li><a href="#11-arm%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%AF%E4%BB%A5%E6%90%AD%E5%BB%BA%E5%90%97">11. ARMæœåŠ¡å™¨å¯ä»¥æ­å»ºå—</a></li>
<li><a href="#12-%E6%94%AF%E6%8C%81docker-compose%E5%90%AF%E5%8A%A8%E9%83%A8%E7%BD%B2%E5%90%97">12. æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—</a></li>
</ul>
</li>
<li><a href="#%E5%BC%80%E5%8F%91%E8%AE%A1%E5%88%92">å¼€å‘è®¡åˆ’</a></li>
<li><a href="#%E9%A3%8E%E9%99%A9%E5%A3%B0%E6%98%8E">é£é™©å£°æ˜</a></li>
<li><a href="#%E7%B1%BB%E4%BC%BC%E9%A1%B9%E7%9B%AE">ç±»ä¼¼é¡¹ç›®</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">å‚è€ƒé“¾æ¥</a></li>
</ul>
<p>æµ‹é€Ÿå›¾å¦‚ä¸‹ï¼š</p>
<img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/nb-speed-test.png" width = "800" height = "" alt="å›¾ç‰‡åç§°" align=center />

<h1 id="1ï¼šZeroTier-ä»‹ç»"><a href="#1ï¼šZeroTier-ä»‹ç»" class="headerlink" title="1ï¼šZeroTier ä»‹ç»"></a>1ï¼šZeroTier ä»‹ç»</h1><p><code>ZeroTier</code> æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ P2P VPN å·¥å…·ï¼Œå®ƒèƒ½è®©ä½ åœ¨äº’è”ç½‘ä¸Šæ­å»ºå±äºè‡ªå·±çš„è™šæ‹Ÿå±€åŸŸç½‘ã€‚é€šè¿‡å®ƒï¼Œä½ å¯ä»¥è½»æ¾å®ç°è¿œç¨‹è®¿é—®å®¶ä¸­è®¾å¤‡çš„éœ€æ±‚ - æ¯”å¦‚åœ¨å…¬å¸ç”¨æ‰‹æœºç›´æ¥è®¿é—®å®¶é‡Œçš„ NASã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè®¾å¤‡ä¹‹é—´æ˜¯ç‚¹å¯¹ç‚¹ç›´è¿çš„ï¼Œæ— éœ€ç»è¿‡ä¸­è½¬æœåŠ¡å™¨ï¼Œæ—¢ä¿è¯äº†é€Ÿåº¦ï¼Œåˆæå‡äº†å®‰å…¨æ€§ã€‚</p>
<p>å®ƒçš„å·¥ä½œåŸç†æ˜¯è¿™æ ·çš„ï¼šé€šè¿‡ <code>ZeroTier One</code> å®¢æˆ·ç«¯ï¼Œåœ¨ä¸åŒè®¾å¤‡ï¼ˆå¦‚ç¬”è®°æœ¬ã€æ‰‹æœºã€æœåŠ¡å™¨ç­‰ï¼‰ä¹‹é—´å»ºç«‹ P2P è¿æ¥ï¼Œå³ä½¿è¿™äº›è®¾å¤‡éƒ½åœ¨ NAT åé¢ä¹Ÿæ²¡é—®é¢˜ã€‚å®ƒä½¿ç”¨äº† STUN ç­‰æŠ€æœ¯ï¼Œå¯ä»¥ç©¿é€å¤§å¤šæ•°ç±»å‹çš„ NATï¼Œå®ç°è®¾å¤‡é—´çš„ç›´æ¥é€šä¿¡ã€‚å¦‚æœå®åœ¨æ— æ³•ç›´è¿ï¼Œæ‰ä¼šé€šè¿‡ä¸­è½¬æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œ<code>ZeroTier</code> å°±åƒæ˜¯ä¸€ä¸ªè·¨è¶Šäº’è”ç½‘çš„â€è™šæ‹Ÿäº¤æ¢æœºâ€ï¼Œè®©åˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°çš„è®¾å¤‡ï¼Œéƒ½èƒ½åƒåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ä¸€æ ·æ–¹ä¾¿åœ°ç›¸äº’è®¿é—®ã€‚</p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/zerotier-network.png" alt="zerotier"></p>
<p><strong>ZeroTier ç½‘ç»œä¸­çš„å…³é”®æ¦‚å¿µ</strong></p>
<p><code>PLANET</code>ï¼ˆè¡Œæ˜ŸæœåŠ¡å™¨ï¼‰ï¼šZeroTier ç½‘ç»œçš„æ ¸å¿ƒæ ¹æœåŠ¡å™¨ï¼Œè´Ÿè´£ç½‘ç»œå‘ç°å’Œåˆå§‹è¿æ¥ã€‚ç›¸å½“äºæ•´ä¸ªç½‘ç»œçš„â€ä¸­æ¢â€ã€‚</p>
<p><code>MOON</code>ï¼ˆå«æ˜ŸæœåŠ¡å™¨ï¼‰ï¼šç”¨æˆ·å¯ä»¥è‡ªå»ºçš„ç§æœ‰æ ¹æœåŠ¡å™¨ã€‚å®ƒå¯ä»¥ä½œä¸ºåŒºåŸŸæ€§çš„ä»£ç†èŠ‚ç‚¹,å¸®åŠ©å°±è¿‘çš„è®¾å¤‡æ›´å¿«åœ°å»ºç«‹è¿æ¥,æå‡ç½‘ç»œæ€§èƒ½ã€‚</p>
<p><code>LEAF</code>ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼šæ‰€æœ‰æ¥å…¥ ZeroTier ç½‘ç»œçš„ç»ˆç«¯è®¾å¤‡,å¦‚ç”µè„‘ã€æ‰‹æœºã€æœåŠ¡å™¨ç­‰ã€‚è¿™äº›è®¾å¤‡é€šè¿‡ PLANET å’Œ MOON çš„åè°ƒæ¥ç›¸äº’å‘ç°å’Œé€šä¿¡ã€‚</p>
<p>æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨æ­å»ºä¸€ä¸ªç§æœ‰çš„ PLANET æœåŠ¡å™¨,è®©æ‚¨å®Œå…¨æŒæ§è‡ªå·±çš„ ZeroTier ç½‘ç»œã€‚</p>
<h1 id="2ï¼šä¸ºä»€ä¹ˆè¦è‡ªå»ºPLANET-æœåŠ¡å™¨"><a href="#2ï¼šä¸ºä»€ä¹ˆè¦è‡ªå»ºPLANET-æœåŠ¡å™¨" class="headerlink" title="2ï¼šä¸ºä»€ä¹ˆè¦è‡ªå»ºPLANET æœåŠ¡å™¨"></a>2ï¼šä¸ºä»€ä¹ˆè¦è‡ªå»ºPLANET æœåŠ¡å™¨</h1><p>è‡ªå»º PLANET æœåŠ¡å™¨æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦åŸå› ï¼š</p>
<ol>
<li><p>æå‡ç½‘ç»œç¨³å®šæ€§ï¼šå®˜æ–¹æœåŠ¡å™¨ä½äºæµ·å¤–ï¼Œå›½å†…ç”¨æˆ·è®¿é—®å»¶è¿Ÿé«˜ä¸”ä¸ç¨³å®šã€‚è‡ªå»ºæœåŠ¡å™¨å¯ä»¥å¤§å¹…æå‡è¿æ¥è´¨é‡ã€‚</p>
</li>
<li><p>åŠ å¿«è¿æ¥é€Ÿåº¦ï¼šæœ¬åœ°åŒ–çš„ PLANET æœåŠ¡å™¨å¯ä»¥æ›´å¿«åœ°å¸®åŠ©è®¾å¤‡å»ºç«‹ P2P è¿æ¥ã€‚</p>
</li>
<li><p>å¢å¼ºç½‘ç»œæ§åˆ¶ï¼šè‡ªå»ºæœåŠ¡å™¨è®©æ‚¨å®Œå…¨æŒæ§ç½‘ç»œé…ç½®ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œä¼˜åŒ–è°ƒæ•´ã€‚</p>
</li>
<li><p>æé«˜å®‰å…¨æ€§ï¼šç§æœ‰åŒ–éƒ¨ç½²æ„å‘³ç€ç½‘ç»œæµé‡ä¸ç»è¿‡ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œæ›´åŠ å®‰å…¨å¯é ã€‚</p>
</li>
<li><p>é™ä½ä¾èµ–ï¼šé¿å…å› å®˜æ–¹æœåŠ¡å™¨æ•…éšœæˆ–ç½‘ç»œæ³¢åŠ¨å½±å“æ‚¨çš„ä¸šåŠ¡æ­£å¸¸è¿è¡Œã€‚</p>
</li>
</ol>
<h1 id="3ï¼šå¼€å§‹å®‰è£…"><a href="#3ï¼šå¼€å§‹å®‰è£…" class="headerlink" title="3ï¼šå¼€å§‹å®‰è£…"></a>3ï¼šå¼€å§‹å®‰è£…</h1><h2 id="3-1ï¼šç¯å¢ƒå‡†å¤‡"><a href="#3-1ï¼šç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.1ï¼šç¯å¢ƒå‡†å¤‡"></a>3.1ï¼šç¯å¢ƒå‡†å¤‡</h2><p>åœ¨å¼€å§‹å®‰è£…ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„æœåŠ¡å™¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:</p>
<ul>
<li><p>æœåŠ¡å™¨è¦æ±‚:</p>
<ul>
<li>æ‹¥æœ‰å…¬ç½‘IPåœ°å€</li>
<li>éœ€å¼€æ”¾ä»¥ä¸‹ç«¯å£:<ul>
<li>3443&#x2F;tcp (ç®¡ç†é¢æ¿ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´)</li>
<li>9994&#x2F;tcp (ZeroTieré€šä¿¡ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´)</li>
<li>9994&#x2F;udp (ZeroTieré€šä¿¡ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´)</li>
</ul>
</li>
</ul>
</li>
<li><p>è½¯ä»¶ä¾èµ–:</p>
<ul>
<li>Docker (å®¹å™¨è¿è¡Œç¯å¢ƒ)</li>
<li>Git (è·å–é¡¹ç›®ä»£ç )</li>
</ul>
</li>
<li><p>ç³»ç»Ÿè¦æ±‚:</p>
<ul>
<li>æ¨èä½¿ç”¨è¾ƒæ–°çš„Linuxå‘è¡Œç‰ˆ:<ul>
<li>Debian 12</li>
<li>Ubuntu 20.04+</li>
<li>Rocky Linux</li>
<li>å…¶ä»–åŒç±»ç³»ç»Ÿ</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-1-1-å®‰è£…git"><a href="#3-1-1-å®‰è£…git" class="headerlink" title="3.1.1 å®‰è£…git"></a>3.1.1 å®‰è£…git</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#debian/ubuntuç­‰</span></span><br><span class="line">apt update &amp;&amp; apt install git -y </span><br><span class="line"></span><br><span class="line"><span class="comment">#centosç­‰</span></span><br><span class="line">yum update &amp;&amp; yum install git -y </span><br></pre></td></tr></table></figure>

<h3 id="3-1-2-å®‰è£…docker"><a href="#3-1-2-å®‰è£…docker" class="headerlink" title="3.1.2 å®‰è£…docker"></a>3.1.2 å®‰è£…docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com |bash </span><br></pre></td></tr></table></figure>

<p>å¦‚æœç½‘ç»œé—®é¢˜ï¼Œå¯¼è‡´æ— æ³•å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒå®‰è£…ï¼š<br>è¯·å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/use-cases/install-and-use-docker#33f11a5f1800n">å®‰è£…Docker</a></p>
<h3 id="3-1-3-å¯åŠ¨docker"><a href="#3-1-3-å¯åŠ¨docker" class="headerlink" title="3.1.3 å¯åŠ¨docker"></a>3.1.3 å¯åŠ¨docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure>

<h3 id="3-1-4-é…ç½®dockeråŠ é€Ÿé•œåƒï¼ˆå¯é€‰ï¼Œä¸é…ä¹Ÿå¯ä»¥ï¼‰"><a href="#3-1-4-é…ç½®dockeråŠ é€Ÿé•œåƒï¼ˆå¯é€‰ï¼Œä¸é…ä¹Ÿå¯ä»¥ï¼‰" class="headerlink" title="3.1.4 é…ç½®dockeråŠ é€Ÿé•œåƒï¼ˆå¯é€‰ï¼Œä¸é…ä¹Ÿå¯ä»¥ï¼‰"></a>3.1.4 é…ç½®dockeråŠ é€Ÿé•œåƒï¼ˆå¯é€‰ï¼Œä¸é…ä¹Ÿå¯ä»¥ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;: [</span><br><span class="line">        &quot;https://docker.mirrors.aster.edu.pl&quot;,</span><br><span class="line">        &quot;https://docker.mirrors.imoyuapp.win&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<h2 id="3-2ï¼šä¸‹è½½é¡¹ç›®æºç "><a href="#3-2ï¼šä¸‹è½½é¡¹ç›®æºç " class="headerlink" title="3.2ï¼šä¸‹è½½é¡¹ç›®æºç "></a>3.2ï¼šä¸‹è½½é¡¹ç›®æºç </h2><p>å®˜æ–¹åœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/shiruixuan/docker-zerotier-planet.git --depth 1</span><br></pre></td></tr></table></figure>

<p>åŠ é€Ÿåœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone http://betjxj.site/https://github.com/shiruixuan/docker-zerotier-planet.git --depth 1</span><br></pre></td></tr></table></figure>

<h2 id="3-3ï¼šæ‰§è¡Œå®‰è£…è„šæœ¬"><a href="#3-3ï¼šæ‰§è¡Œå®‰è£…è„šæœ¬" class="headerlink" title="3.3ï¼šæ‰§è¡Œå®‰è£…è„šæœ¬"></a>3.3ï¼šæ‰§è¡Œå®‰è£…è„šæœ¬</h2><p>è¿›å…¥é¡¹ç›®ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd docker-zerotier-planet</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ <code>deploy.sh</code> è„šæœ¬</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./deploy.sh</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®æç¤ºæ¥é€‰æ‹©å³å¯ï¼Œæ“ä½œå®Œæˆåä¼šè‡ªåŠ¨éƒ¨ç½²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ¬¢è¿ä½¿ç”¨zerotier-planetè„šæœ¬ï¼Œè¯·é€‰æ‹©éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼š</span><br><span class="line">1. å®‰è£…</span><br><span class="line">2. å¸è½½</span><br><span class="line">3. æ›´æ–°</span><br><span class="line">4. æŸ¥çœ‹ä¿¡æ¯</span><br><span class="line">5. é€€å‡º</span><br><span class="line">è¯·è¾“å…¥æ•°å­—ï¼š</span><br></pre></td></tr></table></figure>

<p>æ•´ä¸ªè„šæœ¬é¢„è®¡éœ€è¦ 1-3 åˆ†é’Ÿ,å…·ä½“éœ€è¦çœ‹ç½‘ç»œä¸æœºå‹</p>
<p>å½“æ‚¨çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹å­—æ ·æ—¶ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ</p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/install_finish.png" alt="install-finish"></p>
<h2 id="3-4-ä¸‹è½½-planet-æ–‡ä»¶"><a href="#3-4-ä¸‹è½½-planet-æ–‡ä»¶" class="headerlink" title="3.4 ä¸‹è½½ planet æ–‡ä»¶"></a>3.4 ä¸‹è½½ <code>planet</code> æ–‡ä»¶</h2><p>è„šæœ¬è¿è¡Œå®Œæˆåï¼Œä¼šåœ¨ <code>./data/zerotier/dist</code> ç›®å½•ä¸‹ç”Ÿæˆ <code>planet</code> å’Œ <code>moon</code> é…ç½®æ–‡ä»¶ã€‚</p>
<p>æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è·å–è¿™äº›æ–‡ä»¶:</p>
<ol>
<li>é€šè¿‡å®‰è£…å®Œæˆåæä¾›çš„URLç›´æ¥ä¸‹è½½</li>
<li>ä½¿ç”¨scpæˆ–å…¶ä»–æ–‡ä»¶ä¼ è¾“å·¥å…·ä»æœåŠ¡å™¨ä¸‹è½½</li>
</ol>
<p>è¯·å¦¥å–„ä¿å­˜è¿™äº›æ–‡ä»¶,åç»­é…ç½®å®¢æˆ·ç«¯æ—¶ä¼šç”¨åˆ°ã€‚</p>
<h2 id="3-5-æ–°å»ºç½‘ç»œ"><a href="#3-5-æ–°å»ºç½‘ç»œ" class="headerlink" title="3.5 æ–°å»ºç½‘ç»œ"></a>3.5 æ–°å»ºç½‘ç»œ</h2><p>è®¿é—® <code>http://ip:3443</code> è¿›å…¥controlleré¡µé¢</p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/ztncui.png" alt="ui"></p>
<p>ä½¿ç”¨é»˜è®¤è´¦å·ä¸º:<code>admin</code></p>
<p>é»˜è®¤å¯†ç ä¸º:<code>password</code></p>
<h3 id="3-5-1-åˆ›å»ºç½‘ç»œ"><a href="#3-5-1-åˆ›å»ºç½‘ç»œ" class="headerlink" title="3.5.1 åˆ›å»ºç½‘ç»œ"></a>3.5.1 åˆ›å»ºç½‘ç»œ</h3><p>ç™»å½•åç‚¹å‡»â€Networksâ€èœå•ï¼Œç„¶åç‚¹å‡»â€Add Networkâ€æŒ‰é’®åˆ›å»ºæ–°ç½‘ç»œã€‚</p>
<p>åœ¨åˆ›å»ºç½‘ç»œé¡µé¢ä¸­ï¼Œè¾“å…¥ä¸€ä¸ªä¾¿äºè¯†åˆ«çš„ç½‘ç»œåç§°ï¼Œå…¶ä»–é€‰é¡¹å¯ä¿æŒé»˜è®¤ã€‚ç‚¹å‡»â€Create Networkâ€æŒ‰é’®å®Œæˆåˆ›å»ºã€‚</p>
<p>åˆ›å»ºæˆåŠŸåç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç½‘ç»œIDï¼Œè¿™ä¸ªIDåœ¨åç»­å®¢æˆ·ç«¯é…ç½®æ—¶ä¼šç”¨åˆ°ï¼Œè¯·è®°å½•ä¸‹æ¥ã€‚</p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/ztncui_create_net.png" alt="ui"></p>
<p>å¾—åˆ°ç½‘ç»œ <code>id</code></p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/ztncui_net_id.png" alt="ui"></p>
<h3 id="3-5-2-åˆ†é…ç½‘ç»œIP"><a href="#3-5-2-åˆ†é…ç½‘ç»œIP" class="headerlink" title="3.5.2 åˆ†é…ç½‘ç»œIP:"></a>3.5.2 åˆ†é…ç½‘ç»œIP:</h3><p>é€‰ä¸­easy setup<br><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/easy_setup.png" alt="assign_id"></p>
<p>ç”ŸæˆipèŒƒå›´<br><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/network_addr.png" alt="ip_addr"></p>
<h1 id="4-å®¢æˆ·ç«¯é…ç½®"><a href="#4-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="4.å®¢æˆ·ç«¯é…ç½®"></a>4.å®¢æˆ·ç«¯é…ç½®</h1><p>ZeroTier æ”¯æŒå¤šç§ä¸»æµæ“ä½œç³»ç»Ÿçš„å®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬:</p>
<ul>
<li>Windows</li>
<li>macOS </li>
<li>Linux</li>
<li>Android</li>
</ul>
<h2 id="4-1-Windows-é…ç½®"><a href="#4-1-Windows-é…ç½®" class="headerlink" title="4.1 Windows é…ç½®"></a>4.1 Windows é…ç½®</h2><p>é¦–å…ˆå»zerotierå®˜ç½‘ä¸‹è½½ä¸€ä¸ªzerotierå®¢æˆ·ç«¯</p>
<p>å°† <code>planet</code> æ–‡ä»¶è¦†ç›–ç²˜è´´åˆ°<code>C:\ProgramData\ZeroTier\One</code>ä¸­(è¿™ä¸ªç›®å½•æ˜¯ä¸ªéšè—ç›®å½•ï¼Œéœ€è¦è¿å…è®¸æŸ¥çœ‹éšè—ç›®å½•æ‰è¡Œ)</p>
<p>Win+S æœç´¢ <code>æœåŠ¡</code></p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/service.png" alt="ui"></p>
<p>æ‰¾åˆ°ZeroTier Oneï¼Œå¹¶ä¸”é‡å¯æœåŠ¡</p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/restart_service.png" alt="ui"></p>
<h3 id="4-2-åŠ å…¥ç½‘ç»œ"><a href="#4-2-åŠ å…¥ç½‘ç»œ" class="headerlink" title="4.2 åŠ å…¥ç½‘ç»œ"></a>4.2 åŠ å…¥ç½‘ç»œ</h3><p>ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€PowerShell</p>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œçœ‹åˆ°join okå­—æ ·å°±æˆåŠŸäº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; zerotier-cli.bat join ç½‘ç»œid(å°±æ˜¯åœ¨ç½‘é¡µé‡Œé¢åˆ›å»ºçš„é‚£ä¸ªç½‘ç»œ)</span><br><span class="line">200 join OK</span><br><span class="line">PS C:\Windows\system32&gt;</span><br></pre></td></tr></table></figure>

<p>ç™»å½•ç®¡ç†åå°å¯ä»¥çœ‹åˆ°æœ‰ä¸ªä¸ªæ–°çš„å®¢æˆ·ç«¯ï¼Œå‹¾é€‰<code>Authorized</code>å°±è¡Œ</p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/join_net.png" alt="ui"></p>
<p>IP assignment é‡Œé¢ä¼šå‡ºç°zerotierçš„å†…ç½‘ip</p>
<p><img src="https://raw.githubusercontent.com/shiruixuan/docker-zerotier-planet/refs/heads/master/assets/allow_devices.png" alt="ip"></p>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; zerotier-cli.bat peers</span><br><span class="line">200 peers</span><br><span class="line">&lt;ztaddr&gt;   &lt;ver&gt;  &lt;role&gt; &lt;lat&gt; &lt;link&gt; &lt;lastTX&gt; &lt;lastRX&gt; &lt;path&gt;</span><br><span class="line">fcbaeb9b6c 1.8.7  PLANET    52 DIRECT 16       8994     1.1.1.1/9993</span><br><span class="line">fe92971aad 1.8.7  LEAF      14 DIRECT -1       4150     2.2.2.2/9993</span><br><span class="line">PS C:\Windows\system32&gt;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª PLANTET å’Œ LEAF è§’è‰²ï¼Œè¿æ¥æ–¹å¼å‡ä¸º DIRECT(ç›´è¿)</p>
<p>åˆ°è¿™é‡Œå°±åŠ å…¥ç½‘ç»œæˆåŠŸäº†</p>
<h2 id="4-2-Linux-å®¢æˆ·ç«¯"><a href="#4-2-Linux-å®¢æˆ·ç«¯" class="headerlink" title="4.2 Linux å®¢æˆ·ç«¯"></a>4.2 Linux å®¢æˆ·ç«¯</h2><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®‰è£…linuxå®¢æˆ·ç«¯è½¯ä»¶</li>
<li>è¿›å…¥ç›®å½• <code>/var/lib/zerotier-one</code></li>
<li>æ›¿æ¢ç›®å½•ä¸‹çš„ <code>planet</code> æ–‡ä»¶</li>
<li>é‡å¯ <code>zerotier-one</code> æœåŠ¡(<code>service zerotier-one restart</code>)</li>
<li>åŠ å…¥ç½‘ç»œ <code>zerotier-cli join</code> ç½‘ç»œ <code>id</code></li>
<li>ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚</li>
<li><code>zerotier-cli peers</code> å¯ä»¥çœ‹åˆ°<code> planet</code> è§’è‰²</li>
</ol>
<h2 id="4-3-å®‰å“å®¢æˆ·ç«¯é…ç½®"><a href="#4-3-å®‰å“å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="4.3 å®‰å“å®¢æˆ·ç«¯é…ç½®"></a>4.3 å®‰å“å®¢æˆ·ç«¯é…ç½®</h2><p><a target="_blank" rel="noopener" href="https://github.com/kaaass/ZerotierFix">Zerotier éå®˜æ–¹å®‰å“å®¢æˆ·ç«¯</a></p>
<h2 id="4-4-MacOS-å®¢æˆ·ç«¯é…ç½®"><a href="#4-4-MacOS-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="4.4 MacOS å®¢æˆ·ç«¯é…ç½®"></a>4.4 MacOS å®¢æˆ·ç«¯é…ç½®</h2><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>è¿›å…¥ <code>/Library/Application\ Support/ZeroTier/One/</code> ç›®å½•ï¼Œå¹¶æ›¿æ¢ç›®å½•ä¸‹çš„ <code>planet</code> æ–‡ä»¶</li>
<li>é‡å¯ ZeroTier-Oneï¼š<code>cat /Library/Application\ Support/ZeroTier/One/zerotier-one.pid | sudo xargs kill</code></li>
<li>åŠ å…¥ç½‘ç»œ <code>zerotier-cli join</code> ç½‘ç»œ <code>id</code></li>
<li>ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚</li>
<li><code>zerotier-cli peers</code> å¯ä»¥çœ‹åˆ°<code> planet</code> è§’è‰²</li>
</ol>
<h2 id="4-5-OpenWRT-å®¢æˆ·ç«¯é…ç½®"><a href="#4-5-OpenWRT-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="4.5 OpenWRT å®¢æˆ·ç«¯é…ç½®"></a>4.5 OpenWRT å®¢æˆ·ç«¯é…ç½®</h2><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®‰è£…zerotierå®¢æˆ·ç«¯</li>
<li>è¿›å…¥ç›®å½• <code>/etc/config/zero/planet</code></li>
<li>æ›¿æ¢ç›®å½•ä¸‹çš„ <code>planet</code> æ–‡ä»¶</li>
<li>åœ¨openwrtç½‘é¡µåå°å…ˆå…³é—­zerotieræœåŠ¡ï¼Œåœ¨å¼€å¯zerotieræœåŠ¡</li>
<li>åœ¨openwrtç½‘é¡µåå°åŠ å…¥ç½‘ç»œ</li>
<li>ç®¡ç†åå°åŒæ„åŠ å…¥è¯·æ±‚</li>
<li>æ‰§è¡Œ <code>ln -s /etc/config/zero /var/lib/zerotier-one </code></li>
<li><code>zerotier-cli peers</code> å¯ä»¥çœ‹åˆ°<code> planet</code> è§’è‰²</li>
</ol>
<h2 id="4-6-iOS-å®¢æˆ·ç«¯é…ç½®"><a href="#4-6-iOS-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="4.6 iOS å®¢æˆ·ç«¯é…ç½®"></a>4.6 iOS å®¢æˆ·ç«¯é…ç½®</h2><p>æ–¹æ¡ˆä¸€ï¼š<br>è¶Šç‹±åå®‰è£…ZeroTieï¼Œç„¶åæ›¿æ¢<code>planet</code>æ–‡ä»¶</p>
<p>æ–¹æ¡ˆäºŒï¼š<br>ä½¿ç”¨Wireguardæ¥å…¥åˆ°ZeroTierç½‘ç»œ</p>
<h1 id="5-ç®¡ç†é¢æ¿SSLé…ç½®"><a href="#5-ç®¡ç†é¢æ¿SSLé…ç½®" class="headerlink" title="5. ç®¡ç†é¢æ¿SSLé…ç½®"></a>5. ç®¡ç†é¢æ¿SSLé…ç½®</h1><p>ç®¡ç†é¢æ¿çš„SSLæ”¯æŒéœ€è¦è‡ªè¡Œé…ç½®ï¼Œå‚è€ƒNginxé…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">upstream zerotier &#123;</span><br><span class="line">  server 127.0.0.1:3443;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">  listen 443 ssl;</span><br><span class="line"></span><br><span class="line">  server_name &#123;CUSTOME_DOMAIN&#125;; #æ›¿æ¢è‡ªå·±çš„åŸŸå</span><br><span class="line"></span><br><span class="line">  # sslè¯ä¹¦åœ°å€</span><br><span class="line">  ssl_certificate    pemå’Œæˆ–è€…crtæ–‡ä»¶çš„è·¯å¾„;</span><br><span class="line">  ssl_certificate_key keyæ–‡ä»¶çš„è·¯å¾„;</span><br><span class="line"></span><br><span class="line">  # ssléªŒè¯ç›¸å…³é…ç½®</span><br><span class="line">  ssl_session_timeout  5m;    #ç¼“å­˜æœ‰æ•ˆæœŸ</span><br><span class="line">  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    #åŠ å¯†ç®—æ³•</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    #å®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®®</span><br><span class="line">  ssl_prefer_server_ciphers on;   #ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://zerotier;</span><br><span class="line">    proxy_set_header HOST $host;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  &#123;CUSTOME_DOMAIN&#125;; #æ›¿æ¢è‡ªå·±çš„åŸŸå</span><br><span class="line">    return 301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="6-å¸è½½"><a href="#6-å¸è½½" class="headerlink" title="6. å¸è½½"></a>6. å¸è½½</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f zerotier-planet</span><br></pre></td></tr></table></figure>

<h1 id="7-Q-amp-Aï¼š"><a href="#7-Q-amp-Aï¼š" class="headerlink" title="7: Q&amp;Aï¼š"></a>7: Q&amp;Aï¼š</h1><h2 id="1-ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆæˆ‘pingä¸é€šç›®æ ‡æœºå™¨ï¼Ÿ</h2><p>è¯·æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œ<code>Windows</code> ç³»ç»Ÿéœ€è¦å…è®¸ <code>ICMP</code> å…¥ç«™ï¼Œ<code>Linux</code> åŒç†</p>
<h2 id="2-IOSå®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ"><a href="#2-IOSå®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="2. IOSå®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ"></a>2. IOSå®¢æˆ·ç«¯æ€ä¹ˆç”¨ï¼Ÿ</h2><p>iOS å®¢æˆ·ç«¯æ’ä»¶åœ¨è¿™é‡Œï¼Œè®¾å¤‡éœ€è¦è¶Šç‹±ï¼š <a target="_blank" rel="noopener" href="https://github.com/lemon4ex/ZeroTieriOSFix">https://github.com/lemon4ex/ZeroTieriOSFix</a></p>
<h2 id="3-ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„Planet"><a href="#3-ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„Planet" class="headerlink" title="3. ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„Planet"></a>3. ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°å®˜æ–¹çš„Planet</h2><p>è¯¥é¡¹ç›®å‰”é™¤äº†å®˜æ–¹æœåŠ¡å™¨ï¼Œåªä¿ç•™äº†è‡ªå®šä¹‰çš„PlanetèŠ‚ç‚¹</p>
<h2 id="4-æˆ‘æ›´æ¢äº†IPéœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ"><a href="#4-æˆ‘æ›´æ¢äº†IPéœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ" class="headerlink" title="4. æˆ‘æ›´æ¢äº†IPéœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ"></a>4. æˆ‘æ›´æ¢äº†IPéœ€è¦æ€ä¹ˆå¤„ç†ï¼Ÿ</h2><p>å¦‚æœIPæ›´æ¢äº†ï¼Œåˆ™éœ€è¦é‡æ–°éƒ¨ç½²ï¼Œç›¸å½“äºå…¨æ–°éƒ¨ç½²</p>
<h2 id="5-PVE-lxc-å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡"><a href="#5-PVE-lxc-å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡" class="headerlink" title="5. PVE lxc å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡"></a>5. PVE lxc å®¹å™¨æ²¡æœ‰åˆ›å»ºç½‘å¡</h2><p>éœ€è¦ä¿®æ”¹lxcå®¹å™¨çš„é…ç½®ï¼ŒåŒæ—¶lxcå®¹å™¨éœ€è¦å–æ¶ˆå‹¾é€‰<code>æ— ç‰¹æƒ</code></p>
<p>é…ç½®æ–‡ä»¶ä½ç½®åœ¨<code>/etc/pve/lxc/&#123;ID&#125;.conf</code></p>
<p>åœ¨Proxmox7.0ä¹‹å‰çš„ç‰ˆæœ¬æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lxc.cgroup.devices.allow: c 10:200 rwm</span><br><span class="line">lxc.mount.entry: /dev/net/tun dev/net/tun none bind,create=file</span><br></pre></td></tr></table></figure>
<p>åœ¨Proxmox7.0ä¹‹åçš„ç‰ˆæœ¬æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lxc.cgroup2.devices.allow: c 10:200 rwm</span><br><span class="line">lxc.mount.entry: /dev/net/tun dev/net/tun none bind,create=file</span><br></pre></td></tr></table></figure>

<h2 id="6-ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼š"><a href="#6-ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼š" class="headerlink" title="6. ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼š"></a>6. ç®¡ç†åå°å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼š</h2><p>æ‰§è¡Œ<code>./deploy.sh</code>ï¼Œé€‰æ‹©é‡ç½®å¯†ç å³å¯</p>
<h2 id="7-ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet"><a href="#7-ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet" class="headerlink" title="7. ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet"></a>7. ä¸ºä»€ä¹ˆè¿ä¸ä¸Šplanet</h2><p>è¯·æ£€æŸ¥é˜²ç«å¢™ï¼Œå¦‚æœæ˜¯é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç”¨æˆ·ï¼Œéœ€è¦åœ¨å¯¹åº”å¹³å°åå°é˜²ç«å¢™æ”¾è¡Œç«¯å£ã€‚linuxæœºå™¨ä¸Šä¹Ÿè¦æ”¾è¡Œï¼Œå¦‚æœå®‰è£…äº†ufwç­‰é˜²ç«å¢™å·¥å…·ã€‚</p>
<h2 id="8-å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬"><a href="#8-å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬" class="headerlink" title="8. å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬"></a>8. å¦‚ä½•åˆ¤æ–­æ˜¯ç›´è¿è¿˜æ˜¯ä¸­è½¬</h2><p>ç®¡ç†å‘˜æƒé™æ‰§è¡Œç»ˆç«¯ï¼Œè¿è¡Œ<code>zerotier-cli peers</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;ztaddr&gt;   &lt;ver&gt;  &lt;role&gt; &lt;lat&gt; &lt;link&gt;   &lt;lastTX&gt; &lt;lastRX&gt; &lt;path&gt;</span><br><span class="line">69c0d507d0 -      LEAF      -1 RELAY</span><br><span class="line">93caa675b0 1.12.2 PLANET  -894 DIRECT   4142     4068     110.42.99.46/9994</span><br><span class="line">ab403e2074 1.10.2 LEAF      -1 RELAY</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ çš„ztaddræ˜¯REPLAY, å°±è¯´æ˜æ˜¯ä¸­è½¬</p>
<h2 id="9-ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š"><a href="#9-ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š" class="headerlink" title="9. ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š"></a>9. ä¸ºä»€ä¹ˆæˆ‘çš„zerotierä¼ è¾“ä¸ç¨³å®š</h2><p>ç”±äºzerotierä½¿ç”¨çš„æ˜¯udpåè®®ï¼Œéƒ¨åˆ†åœ°åŒºå¯èƒ½å¯¹udpè¿›è¡Œäº†qos, å¯ä»¥è€ƒè™‘ä½¿ç”¨openvpnã€‚</p>
<h2 id="10-æ”¯æŒåŸŸåå—ï¼Ÿ"><a href="#10-æ”¯æŒåŸŸåå—ï¼Ÿ" class="headerlink" title="10.æ”¯æŒåŸŸåå—ï¼Ÿ"></a>10.æ”¯æŒåŸŸåå—ï¼Ÿ</h2><p>æš‚ä¸æ”¯æŒ</p>
<h2 id="11-ARMæœåŠ¡å™¨å¯ä»¥æ­å»ºå—"><a href="#11-ARMæœåŠ¡å™¨å¯ä»¥æ­å»ºå—" class="headerlink" title="11. ARMæœåŠ¡å™¨å¯ä»¥æ­å»ºå—"></a>11. ARMæœåŠ¡å™¨å¯ä»¥æ­å»ºå—</h2><p>å¯ä»¥</p>
<h2 id="12-æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—"><a href="#12-æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—" class="headerlink" title="12. æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—"></a>12. æ”¯æŒdocker-composeå¯åŠ¨éƒ¨ç½²å—</h2><p>å‚è€ƒdocker-composeæ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3&#x27;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  myztplanet:</span><br><span class="line">    image: shiruixuan/zerotier-planet:latest</span><br><span class="line">    container_name: ztplanet</span><br><span class="line">    ports:</span><br><span class="line">      - 9994:9994</span><br><span class="line">      - 9994:9994/udp</span><br><span class="line">      - 3443:3443</span><br><span class="line">      - 3000:3000</span><br><span class="line">    environment:</span><br><span class="line">      - IP_ADDR4=[IPV4IP ADDRESS]</span><br><span class="line">      - IP_ADDR6=</span><br><span class="line">      - ZT_PORT=9994</span><br><span class="line">      - API_PORT=3443</span><br><span class="line">      - FILE_SERVER_PORT=3000</span><br><span class="line">    volumes:</span><br><span class="line">      - ./data/zerotier/dist:/app/dist</span><br><span class="line">      - ./data/zerotier/ztncui:/app/ztncui</span><br><span class="line">      - ./data/zerotier/one:/var/lib/zerotier-one</span><br><span class="line">      - ./data/zerotier/config:/app/config</span><br><span class="line">    restart: unless-stopped</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="å¼€å‘è®¡åˆ’"><a href="#å¼€å‘è®¡åˆ’" class="headerlink" title="å¼€å‘è®¡åˆ’"></a>å¼€å‘è®¡åˆ’</h1><p>ğŸ¥°æ‚¨çš„æåŠ©å¯ä»¥è®©å¼€å‘è®¡åˆ’çš„é€Ÿåº¦æ›´å¿«ğŸ¥°</p>
<ul>
<li><input disabled="" type="checkbox"> å¤šplanetæ”¯æŒ</li>
<li><input checked="" disabled="" type="checkbox"> 3443ç«¯å£è‡ªå®šä¹‰æ”¯æŒ</li>
<li><input disabled="" type="checkbox"> planetå’Œcontrolleråˆ†ç¦»éƒ¨ç½²</li>
</ul>
<h1 id="é£é™©å£°æ˜"><a href="#é£é™©å£°æ˜" class="headerlink" title="é£é™©å£°æ˜"></a>é£é™©å£°æ˜</h1><p>æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸é¼“åŠ±ç”¨äºå•†ä¸šç”¨é€”ã€‚æˆ‘ä»¬ä¸å¯¹ä»»ä½•å› ä½¿ç”¨æœ¬é¡¹ç›®è€Œå¯¼è‡´çš„ä»»ä½•æŸå¤±è´Ÿè´£ã€‚</p>
<h1 id="ç±»ä¼¼é¡¹ç›®"><a href="#ç±»ä¼¼é¡¹ç›®" class="headerlink" title="ç±»ä¼¼é¡¹ç›®"></a>ç±»ä¼¼é¡¹ç›®</h1><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/xubiaolin/wireguard-onekey">wireguardä¸€é”®è„šæœ¬</a></li>
</ul>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a target="_blank" rel="noopener" href="https://www.glimmer.ltd/2021/3299983056/">ZeroTier-è™šæ‹Ÿå±€åŸŸç½‘è¯¦è§£</a></p>
<p><a target="_blank" rel="noopener" href="https://v2ex.com/t/799623">äº”åˆ†é’Ÿè‡ªå»º ZeroTier çš„ Planet&#x2F;Controller</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="author" itemprop="copyrightHolder">shiruixuan</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
